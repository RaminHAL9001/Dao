string.compare = approximate;

BEGIN {
	print("--- BEGIN ---");
	emptyList = list {};
	if(emptyList) { print("emptyList is NOT empty"); }
	else { print("emptyList is empty"); }
	(global comma) = list {};
	comma.final = 0;
}

rule "$*, $*" {
	if(comma.final) { return; }
	print("$1 -> " + join($1));
	if($1) { (global comma) += list { join("", $1) }; }
	print("$2 -> " + join($2));
	a = join(" ", $2);
	if(a) { do(a); }
	else { comma.final = 1; }
}

END {
	print("---- END ----");
	a = 1;
	for x in (global comma) {
		print(a+": "+x);
		a += 1;
	}
}

